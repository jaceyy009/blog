<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>{{ page.title | ROTA Vision Blog }}</title>
    <link rel="icon" type="image/x-icon" href="{{ '/favicon.ico' | relative_url }}">
    <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8R2S2YXG18"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-8R2S2YXG18');
</script>
  </head>
  <body>
    {% include header.html %}
    
    {{ content }}

    {% include footer.html %}
    
    <script>
      document.querySelectorAll('.alt-words').forEach(el => {
        // Split the heading text into words, wrap each in a <span>, and join back
        el.innerHTML = el.textContent
          .split(' ')
          .map(function(word { return '<span>' + word + '</span>'; })
          .join(' ');
      });
    </script>
    
    <script>
      const toggleTheme = () => {
        const current = document.documentElement.getAttribute('data-theme');
        const next = current === 'dark' ? 'light' : 'dark';
        document.documentElement.setAttribute('data-theme', next);
        localStorage.setItem('theme', next);
      };

      //Load saved theme
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme) {
        document.documentElement.setAttribute('data-theme', savedTheme);
      }
    </script>

    <body class="{{ page.body_class }}">

      <script>
        const pages = [
          { title: "Home", url: "/" },
          { title: "Contact", url: "/contact/" }
          ];

        const form = document.getElementById('searchForm');
        const input = document.getElementById('searchInput');
        const results = document.getElementById('searchResults');

        function runSearch(query) {
          results.innerHTML = '';

          if (!query) return;

          const matches = pages.filter(p =>
            p.title.toLowerCase().includes(query)
            );

          if (matches.length === 0) {
            results.innerHTML = '<div>No results found</div>';
            return;
          }

          matches.forEach(p => {
            const link = ducment.createElement('a');
            link.href = p.url;
            link.textContent = p.title;
            results.appendChild(link);
          });
        }

        if (input) {
          input.addEventListener('input', function () => {
            runSearch(input.value.toLowerCase());
          });
        }

        if (form) {
          form.addEventListener('submit', (e) => {
            e.preventDefault(); // ‚Üê CRITICAL
            runSearch(input.value.toLowerCase());
          });
        }
          </script>

      <script>
        document.addEventListener('DOMContentLoaded', function () {
          // --- Auto year ---
          const yearEl = document.getElementById('year');
          if (yearEl) yearEl.textContent = new Date().getFullYear();

          // Use short GitHub SHA as proxy for commit count
          const sha = "{{ site.github.build_revision | slice: 0,7 }}"; // e.g., "1b51abf"
          let versionNumber = parseInt(sha, 16); // convert hex to decimal
          const versionEl = document.getElementById('version');
          if (versionEl) versionEl.textContent = versionNumber;
        });
      </script>
    </body>
  </body>
</html>
